# =============================================================================
# School Attendance - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment
# For production, use .env.production with secure values

# -----------------------------------------------------------------------------
# Core Application Settings
# -----------------------------------------------------------------------------
APP_ENV=development                    # development | staging | production
APP_NAME=school-attendance             # Used for container naming
API_HOST=0.0.0.0
API_PORT=8000
PUBLIC_BASE_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Security (REQUIRED in production - generate secure values!)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE-ME-IN-PRODUCTION
DEVICE_API_KEY=CHANGE-ME-IN-PRODUCTION

# JWT Token expiration
JWT_ACCESS_EXPIRES_MIN=15
JWT_REFRESH_EXPIRES_DAYS=7

# CORS Origins (comma-separated, empty = allow all in dev, none in prod)
CORS_ORIGINS=

# Rate limiting (requests per minute)
RATE_LIMIT_DEFAULT=100/minute

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# Development (SQLite)
DATABASE_URL=sqlite+aiosqlite:///./dev.db

# Production (PostgreSQL)
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/school_attendance
DB_USER=school_attendance
DB_PASSWORD=school_attendance
DB_NAME=school_attendance
DB_PORT=5432

# -----------------------------------------------------------------------------
# Redis / Job Queue
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Object Storage (S3/MinIO)
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:9000     # Use https://s3.amazonaws.com for AWS
S3_BUCKET=attendance-photos
S3_ACCESS_KEY=dev-access
S3_SECRET_KEY=dev-secret
S3_REGION=us-east-1
S3_SECURE=false                        # true for HTTPS endpoints
PHOTO_RETENTION_DAYS=60

# MinIO ports (development)
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# -----------------------------------------------------------------------------
# Notifications
# -----------------------------------------------------------------------------
# WhatsApp Business API
WHATSAPP_ACCESS_TOKEN=dummy
WHATSAPP_PHONE_NUMBER_ID=dummy

# AWS SES Email
SES_REGION=us-east-1
SES_SOURCE_EMAIL=no-reply@example.com

# Enable real notifications (false = simulate only)
ENABLE_REAL_NOTIFICATIONS=false

# -----------------------------------------------------------------------------
# Feature Configuration
# -----------------------------------------------------------------------------
NO_SHOW_GRACE_MINUTES=15              # Minutes after class start to trigger no-show alert

# -----------------------------------------------------------------------------
# Docker / Deployment
# -----------------------------------------------------------------------------
REGISTRY_USER=moffermann
IMAGE_TAG=latest
DOCKER_NETWORK=net-dev
API_PORT=8080
RQ_DASHBOARD_PORT=9181
