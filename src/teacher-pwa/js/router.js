// Hash router
// Note: currentTeacherId can be 0 for admin users, so we check !== null instead of truthy
const Router={routes:{},init(){this.addRoute('/auth',Views.auth);this.addRoute('/classes',Views.classes);this.addRoute('/roster',Views.roster);this.addRoute('/scan-qr',Views.scanQR);this.addRoute('/take-attendance',Views.takeAttendance);this.addRoute('/queue',Views.queue);this.addRoute('/history',Views.history);this.addRoute('/alerts',Views.alerts);this.addRoute('/settings',Views.settings);this.addRoute('/help',Views.help);this.addRoute('/student-profile',Views.studentProfile);window.addEventListener('hashchange',()=>this.handleRoute());this.handleRoute();},addRoute(path,handler){this.routes[path]=handler;},handleRoute(){const hash=window.location.hash.slice(1)||'/auth';const[path]=hash.split('?');if(State.currentTeacherId===null&&path!=='/auth'){this.navigate('/auth');return;}const route=this.routes[path];route?route():this.navigate('/auth');},navigate(path){window.location.hash=path;},getParams(){const hash=window.location.hash.slice(1);const[,query]=hash.split('?');return query?Object.fromEntries(new URLSearchParams(query)):{};}};
